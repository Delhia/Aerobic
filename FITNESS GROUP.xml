<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<item>
<title>[B][COLOR aqua]STEP Z8[/COLOR][/B]</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
  <title>[COLOR gold]+[/COLOR][COLOR white][makelist.param1][/COLOR]</title>
  <link>$doregex[jd]</link>
  <thumbnail>https://i.ytimg.com/vi/[makelist.param2]/hqdefault.jpg</thumbnail>
 <fanart>ttps://i.imgur.com/MU8M8hO.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re,urllib
def GetLSProData(page_data,Cookie_Jar,m):
  source=urllib.urlopen('https://www.youtube.com/playlist?list=PLzEzh4ukGq9Yncqvrqcwp2GYHfK7W_0cA').read().replace('amp;','').replace('#038;','').replace('&#39;','\'').replace('&quot;','"')
  vID=re.findall('"playlistVideoRenderer".*?Id":"([^"]+)',source)
  title=re.findall('"title":.*?text":"([^"]+)',source)
  return zip(title,vID)
]]></expres>
<page></page>
</regex>  
<regex>
<name>jd</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
   import resolveurl
   url = 'https://youtu.be/[makelist.param2]'
   u = resolveurl.resolve(url)
   return u
]]></expres>
<page></page>
</regex>
<thumbnail>https://i.imgur.com/MU8M8hO.jpg</thumbnail>
<fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
</item>

<item>
<title>[B][COLOR aqua]STEP Z9[/COLOR][/B]</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
  <title>[COLOR gold]+[/COLOR][COLOR white][makelist.param1][/COLOR]</title>
  <link>$doregex[jd]</link>
  <thumbnail>https://i.ytimg.com/vi/[makelist.param2]/hqdefault.jpg</thumbnail>
 <fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re,urllib
def GetLSProData(page_data,Cookie_Jar,m):
  source=urllib.urlopen('https://www.youtube.com/playlist?list=PLzEzh4ukGq9ZlWbFMrVFJ5-s9rUWVLQUz').read().replace('amp;','').replace('#038;','').replace('&#39;','\'').replace('&quot;','"')
  vID=re.findall('"playlistVideoRenderer".*?Id":"([^"]+)',source)
  title=re.findall('"title":.*?text":"([^"]+)',source)
  return zip(title,vID)
]]></expres>
<page></page>
</regex>  
<regex>
<name>jd</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
   import resolveurl
   url = 'https://youtu.be/[makelist.param2]'
   u = resolveurl.resolve(url)
   return u
]]></expres>
<page></page>
</regex>
<thumbnail>https://i.imgur.com/MU8M8hO.jpg</thumbnail>
<fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
</item>








<item>
<title>[B][COLOR aqua]STEP Z14[/COLOR][/B]</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
  <title>[COLOR gold]+[/COLOR][COLOR white][makelist.param1][/COLOR]</title>
  <link>$doregex[jd]</link>
  <thumbnail>https://i.ytimg.com/vi/[makelist.param2]/hqdefault.jpg</thumbnail>
 <fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re,urllib
def GetLSProData(page_data,Cookie_Jar,m):
  source=urllib.urlopen('https://www.youtube.com/playlist?list=PLzEzh4ukGq9a_FqU7mNrZPtXppbx9da-N').read().replace('amp;','').replace('#038;','').replace('&#39;','\'').replace('&quot;','"')
  vID=re.findall('"playlistVideoRenderer".*?Id":"([^"]+)',source)
  title=re.findall('"title":.*?text":"([^"]+)',source)
  return zip(title,vID)
]]></expres>
<page></page>
</regex>  
<regex>
<name>jd</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
   import resolveurl
   url = 'https://youtu.be/[makelist.param2]'
   u = resolveurl.resolve(url)
   return u
]]></expres>
<page></page>
</regex>
<thumbnail>https://i.imgur.com/MU8M8hO.jpg</thumbnail>
<fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
</item>









<item>
<title>[B][COLOR aqua]STEP Z15[/COLOR][/B]</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
  <title>[COLOR gold]+[/COLOR][COLOR white][makelist.param1][/COLOR]</title>
  <link>$doregex[jd]</link>
  <thumbnail>https://i.ytimg.com/vi/[makelist.param2]/hqdefault.jpg</thumbnail>
 <fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re,urllib
def GetLSProData(page_data,Cookie_Jar,m):
  source=urllib.urlopen('https://www.youtube.com/playlist?list=PLzEzh4ukGq9Zz9dDN9jvmNmlhTG3KCrw7').read().replace('amp;','').replace('#038;','').replace('&#39;','\'').replace('&quot;','"')
  vID=re.findall('"playlistVideoRenderer".*?Id":"([^"]+)',source)
  title=re.findall('"title":.*?text":"([^"]+)',source)
  return zip(title,vID)
]]></expres>
<page></page>
</regex>  
<regex>
<name>jd</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m):
   import resolveurl
   url = 'https://youtu.be/[makelist.param2]'
   u = resolveurl.resolve(url)
   return u
]]></expres>
<page></page>
</regex>
<thumbnail>https://i.imgur.com/MU8M8hO.jpg</thumbnail>
<fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
</item>






<item>
<title>[B][COLOR aqua]STEP Z15[/COLOR][/B]</title>
<link>$doregex[link_inteligente]</link>
<regex>
<name>link_inteligente</name>
<listrepeat><![CDATA[
<title>[COLOR yellow]+[/COLOR] [COLOR white][link_inteligente.param1][/COLOR]</title>
<link>$doregex[id]</link>
<thumbnail>https://i.ytimg.com/vi/[link_inteligente.param2]/hqdefault.jpg</thumbnail>
<fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
url = 'https://www.youtube.com/watch?v=-0X-zkYtY1Y&list=PLzEzh4ukGq9Zz9dDN9jvmNmlhTG3KCrw7'
import re,requests,xbmc
def GetLSProData(page_data,Cookie_Jar,m,url=url):#cPrLItsLTfakl
 
  if '=' in url[:7]:
    if 'canal' in url[:7]:
        s2 = url + '2018Cristalazul'
        url = re.findall('(http.*?)2018Cristalazul', s2)[0]
        html = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
        return re.findall('(?s)"title":\{"accessibility":\{"accessibilityData":\{"label":".*?".*?simpleText":"(.*?)".*?watch.v=(.*?)"', html)
    elif 'lista' in url[:7]:
        s2 = url + '2018Cristalazul'
        url = re.findall('(http.*?)2018Cristalazul', s2)[0]
        html = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
        return re.findall('(?s)playlistPanelVideoRenderer".*?simpleText":"(.*?)".*?vi\/(.*?)\/', html)
    elif 'enlace' in url[:7]:
        s2 = url + '2018Cristalazul'
        url = re.findall('(http.*?)2018Cristalazul', s2)[0]
        titulo2 = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
        titulo = re.findall('title.":{."simpleText.":."(.*?)"', titulo2)[0]
        html = url + '2018CristalAzul'
        enlace = re.findall('v=(.*?)2018CristalAzul', html)[0]
        return [(titulo, enlace)]
    else:
        return xbmc.executebuiltin("XBMC.Notification([COLOR aqua]Error [/COLOR],[COLOR white]Enlace Mal puesto[/COLOR], 4000)")
  elif 'channel' in url:
    html = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
    return re.findall('(?s)"title":\{"accessibility":\{"accessibilityData":\{"label":".*?".*?simpleText":"(.*?)".*?watch.v=(.*?)"', html)
  elif 'youtube.com/c/' in url:
    html = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
    return re.findall('(?s)"title":\{"accessibility":\{"accessibilityData":\{"label":".*?".*?simpleText":"(.*?)".*?watch.v=(.*?)"', html)
  elif 'youtube.com/user' in url:
    html = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
    return re.findall('(?s)"title":\{"accessibility":\{"accessibilityData":\{"label":".*?".*?simpleText":"(.*?)".*?watch.v=(.*?)"', html)
  elif 'list' in url:
    html = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
    return re.findall('(?s)playlistPanelVideoRenderer".*?simpleText":"(.*?)".*?vi\/(.*?)\/', html)
  else:
    titulo2 = requests.get(url, headers={'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64; rv:55.0) Gecko/20100101 Firefox/55.0'}, verify=False).text
    titulo = re.findall('title.":{."simpleText.":."(.*?)"', titulo2)[0]
    html = url + '2018CristalAzul'
    enlace = re.findall('v=(.*?)2018CristalAzul', html)[0]
    return [(titulo, enlace)]
]]></expres>
<page></page>
</regex> 
<regex>
<name>id</name>
<expres><![CDATA[#$pyFunction
import resolveurl
def GetLSProData(page_data,Cookie_Jar,m):
  url = 'https://www.youtube.com/watch?v=[link_inteligente.param2]'
  return resolveurl.resolve(url)
]]></expres>
<page></page>
</regex>
<thumbnail>https://i.imgur.com/MU8M8hO.jpg</thumbnail>
<fanart>https://i.imgur.com/MU8M8hO.jpg</fanart>
</item>








